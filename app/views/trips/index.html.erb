<main>
  <section class="py-5 text-center container">
    <div class="container">
      <div class="row">
          <div class="col-lg-3 trips-container">
            <div class="scroll-container trips">
              <% @trips.each do |trip| %>
                <div class="trip-card">
                  <h5><%= trip.name %></h5>
                  <p><%= trip.status.humanize %></p>
                  <button class="btn btn-primary trip-button" data-lat=<%= trip[:destination_details]["lat"] %>
          data-long=<%= trip[:destination_details]["long"] %> data-attribute-id="<%= trip.id %>">Click To View Location</button>
                <%= link_to "delete", @recipe, :method => :destroy, data: { confirm: "Are you sure you want to delete this trip?" }, class: "btn btn-danger" %>
                </div>
              <% end %>
            </div>
          </div>
          <div class="col-lg">
            <div id="map" style="width: 100%; height: 400px;"></div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-3">
            <%= link_to "Create New Trip", new_trip_path, class: "btn btn-primary create-trip-button" %>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<script>
  $(document).ready(function() {
    $('.trips').on('click', '.trip-button', function(event) {
      var selectedShipmentId = $(this).data('attribute-id');
      var lat = $(this).data('lat');
      var long = $(this).data('long');

      renderGoogleMap(lat, long)
    });
  });

  function renderGoogleMap(lat, long) {
    var mapOptions = {
      center: { lat: lat, lng: long },
      zoom: 20
    };

    var map = new google.maps.Map(document.getElementById('map'), mapOptions);

    var marker = new google.maps.Marker({
      position: { lat: lat, lng: long },
      map: map,
      title: 'Selected Location'
    });
    console.log(marker)
  }
</script>
